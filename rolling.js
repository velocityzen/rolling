"use strict";!function(t,n,o,i){var i=i||{},e=function(n){var o=i[n]||t[n];if(!o)throw new Error("Requested module '"+n+"' has not been defined.");return o},r=function(n,o,e){e?t[n]=o:i[n]=o};!function(t,n,o){for(var i,e=0,l=["ms","moz","webkit","o"],u=0;u<l.length&&!t.requestAnimationFrame;++u)i=t[l[u]+"RequestAnimationFrame"];i||(i=t.requestAnimationFrame||function(n){var o=(new Date).getTime(),i=Math.max(0,16-(o-e)),r=t.setTimeout(function(){n(o+i)},i);return e=o+i,r}),r("util/detective",{requestAnimationFrame:i})}(t,n),function(t,n,o){r("rolling/easing",{linear:function(t,n,o,i){return o*t/i+n},inQuad:function(t,n,o,i){return o*(t/=i)*t+n},outQuad:function(t,n,o,i){return-o*(t/=i)*(t-2)+n},inOutQuad:function(t,n,o,i){return(t/=i/2)<1?o/2*t*t+n:-o/2*(--t*(t-2)-1)+n},inCubic:function(t,n,o,i){return o*(t/=i)*t*t+n},outCubic:function(t,n,o,i){return o*((t=t/i-1)*t*t+1)+n},inOutCubic:function(t,n,o,i){return(t/=i/2)<1?o/2*t*t*t+n:o/2*((t-=2)*t*t+2)+n},inQuart:function(t,n,o,i){return o*(t/=i)*t*t*t+n},outQuart:function(t,n,o,i){return-o*((t=t/i-1)*t*t*t-1)+n},inOutQuart:function(t,n,o,i){return(t/=i/2)<1?o/2*t*t*t*t+n:-o/2*((t-=2)*t*t*t-2)+n},inQuint:function(t,n,o,i){return o*(t/=i)*t*t*t*t+n},outQuint:function(t,n,o,i){return o*((t=t/i-1)*t*t*t*t+1)+n},inOutQuint:function(t,n,o,i){return(t/=i/2)<1?o/2*t*t*t*t*t+n:o/2*((t-=2)*t*t*t*t+2)+n},inSine:function(t,n,o,i){return-o*Math.cos(t/i*(Math.PI/2))+o+n},outSine:function(t,n,o,i){return o*Math.sin(t/i*(Math.PI/2))+n},inOutSine:function(t,n,o,i){return-o/2*(Math.cos(Math.PI*t/i)-1)+n},inExpo:function(t,n,o,i){return 0==t?n:o*Math.pow(2,10*(t/i-1))+n},outExpo:function(t,n,o,i){return t==i?n+o:o*(-Math.pow(2,-10*t/i)+1)+n},inOutExpo:function(t,n,o,i){return 0==t?n:t==i?n+o:(t/=i/2)<1?o/2*Math.pow(2,10*(t-1))+n:o/2*(-Math.pow(2,-10*--t)+2)+n},inCirc:function(t,n,o,i){return-o*(Math.sqrt(1-(t/=i)*t)-1)+n},outCirc:function(t,n,o,i){return o*Math.sqrt(1-(t=t/i-1)*t)+n},inOutCirc:function(t,n,o,i){return(t/=i/2)<1?-o/2*(Math.sqrt(1-t*t)-1)+n:o/2*(Math.sqrt(1-(t-=2)*t)+1)+n},inElastic:function(t,n,o,i){var e=1.70158,r=0,l=o;if(0==t)return n;if(1==(t/=i))return n+o;if(r||(r=.3*i),l<Math.abs(o)){l=o;var e=r/4}else var e=r/(2*Math.PI)*Math.asin(o/l);return-(l*Math.pow(2,10*(t-=1))*Math.sin((t*i-e)*(2*Math.PI)/r))+n},outElastic:function(t,n,o,i){var e=1.70158,r=0,l=o;if(0==t)return n;if(1==(t/=i))return n+o;if(r||(r=.3*i),l<Math.abs(o)){l=o;var e=r/4}else var e=r/(2*Math.PI)*Math.asin(o/l);return l*Math.pow(2,-10*t)*Math.sin((t*i-e)*(2*Math.PI)/r)+o+n},inOutElastic:function(t,n,o,i){var e=1.70158,r=0,l=o;if(0==t)return n;if(2==(t/=i/2))return n+o;if(r||(r=i*(.3*1.5)),l<Math.abs(o)){l=o;var e=r/4}else var e=r/(2*Math.PI)*Math.asin(o/l);return t<1?-.5*(l*Math.pow(2,10*(t-=1))*Math.sin((t*i-e)*(2*Math.PI)/r))+n:l*Math.pow(2,-10*(t-=1))*Math.sin((t*i-e)*(2*Math.PI)/r)*.5+o+n},inBack:function(t,n,i,e,r){return r==o&&(r=1.70158),i*(t/=e)*t*((r+1)*t-r)+n},outBack:function(t,n,i,e,r){return r==o&&(r=1.70158),i*((t=t/e-1)*t*((r+1)*t+r)+1)+n},inOutBack:function(t,n,i,e,r){return r==o&&(r=1.70158),(t/=e/2)<1?i/2*(t*t*(((r*=1.525)+1)*t-r))+n:i/2*((t-=2)*t*(((r*=1.525)+1)*t+r)+2)+n}})}(t,n),function(t,n,o){var i,l,u=e("util/detective").requestAnimationFrame,c=e("util/detective").isTouch,a=e("rolling/easing"),s="onwheel"in n.createElement("div")?"wheel":n.onmousewheel!==o?"mousewheel":"DOMMouseScroll",h=0,f=0,d={},g=n.documentElement,v=function(t,n,o){t.addEventListener(n,o,!1)},m=function(t,n,o){t.removeEventListener(n,o)},p=!0,b=function(){p=!0};v(t,"resize",b);var w=function(){p&&(i=Math.max(g.clientHeight,t.innerHeight||0),l=Math.max(g.clientWidth,t.innerWidth||0));for(var n in d){var o=d[n];(o.toUpdate||p)&&o.calc()}p=!1,f&&u(w)},M={rollto:function(){var t=this,n=this.el,o=t.a,i=Date.now()-t.begin;i>t.duration&&(i=t.duration,t.stop());for(var e in o)n[e]=t.ease(i,o[e].b,o[e].c,t.duration)},rollon:function(){var t=this,n=t.el,o=t.c,i=n.getBoundingClientRect();for(var e in o)for(var r=o[e],l=r.c,u=r.on,c=0,a=u.length;c<a;c++){var s,h,f,d=u[c],g={target:d},v=d.getBoundingClientRect(),m=n===d;t.current={};for(var p in l){var b=l[p];s=!0;for(var w in b){h=Object.keys(b[w])[0],f=b[w][h][0];var M=b[w][h][1],P=t.getPos(h+f,m,i,v);if("top"===h||"left"===h?P<M:P>M){s=!1;break}}if(s===!0)break}var E=d.getAttribute("data-rollon-state-"+e);E&&"true"===E===s||(d.setAttribute("data-rollon-state-"+e,s),g[h]=f,r.cb(s,g))}t.toUpdate=!1},rolldirections:function(){var t,n=this,o=n.top-n.el.scrollTop,i=n.left-n.el.scrollLeft,e=Math.abs(o),r=Math.abs(i),l=n.c;for(var u in l){var c=l[u];"v"===c.d&&e>c.t?(t=o<0,n.vertical!==t&&(n.vertical=t,c.cb(n.vertical))):"h"===c.d&&r>c.t&&(t=i<0,n.horizontal!==t&&(n.horizontal=t,c.cb(n.horizontal)))}n.top=n.el.scrollTop,n.left=n.el.scrollLeft,n.toUpdate=!1}},P=function(o,i,e){var r=this;switch(r.el=o,r.isWindow=o===n.body||o===g,r.type=i,r.calc=M[i],i){case"rollto":r.duration=e.duration,r.ease=a[e.ease],r.cb=e.cb,r.a={};for(var l in e.a)r.a[l]={b:o[l],c:e.a[l]};r.onScroll=function(){r.stop(),m(o,s,r.onScroll)},v(o,s,r.onScroll),r.begin=Date.now(),r.toUpdate=!0;break;case"rolldirections":r.top=o.scrollTop,r.left=o.scrollLeft,r.onScroll=function(){r.toUpdate=!0},v(o,s,r.onScroll),c&&v(o,"touchmove",r.onScroll),r.c=[],r.add(e);break;case"rollon":r.onScroll=function(){r.toUpdate=!0},r.isWindow?v(t,"scroll",r.onScroll):v(o,"scroll",r.onScroll),r.c=[],r.add(e)}r.start()};P.prototype={add:function(t){this.c.push(t),this.update()},start:function(){this.id=h++,this.el.setAttribute("data-"+this.type,this.id),d[this.id]=this,1===++f&&w()},stop:function(){this.a?m(this.el,s,this.onScroll):(m(t,"resize",this.onScroll),m(t,"scroll",this.onScroll),m(t,"touchmove",this.onScroll),m(this.el,"scroll",this.onScroll),this.el.removeAttribute("data-rollon-state")),this.el.removeAttribute("data-"+this.type),d[this.id]&&(delete d[this.id],f--,this.cb&&this.done())},done:function(){var t=this;setTimeout(function(){t.cb(t.el)},0)},update:function(){var t=this.c;for(var n in t){var o=t[n];o.selector&&(o.on=this.el.querySelectorAll(o.selector))}this.toUpdate=!0},getPos:function(t,n,o,i){return this.current[t]||(this.current[t]=E[t].call(this,n,o,i)),this.current[t]}};var E={toptop:function(t,n,o){return this.isWindow?o.top:t?this.el.scrollTop:o.top-n.top},topmiddle:function(t,n,o){return this.getPos("toptop",t,n,o)+o.height/2},topbottom:function(t,n,o){return this.isWindow?o.bottom:o.bottom-n.top},middletop:function(t,n,o){return this.getPos("toptop",t,n,o)-(this.isWindow?i/2:n.height/2)},middlemiddle:function(t,n,o){return this.getPos("middletop",t,n,o)+o.height/2},middlebottom:function(t,n,o){return-this.getPos("bottombottom",t,n,o)-(this.isWindow?i/2:n.height/2)},bottomtop:function(t,n,o){return this.isWindow?o.top-i:o.top-n.bottom},bottommiddle:function(t,n,o){return this.getPos("bottombottom",t,n,o)-o.height/2},bottombottom:function(t,n,o){return this.isWindow?o.bottom-i:t?this.el.scrollHeight-this.el.scrollTop-this.el.offsetHeight:o.bottom-n.bottom},leftleft:function(t,n,o){return this.isWindow?o.left:t?this.el.scrollLeft:o.left-n.left},leftcenter:function(t,n,o){return this.getPos("leftleft",t,n,o)+o.width/2},leftright:function(t,n,o){return this.isWindow?o.right:o.right-n.left},centerleft:function(t,n,o){return this.getPos("leftleft",t,n,o)-(this.isWindow?l/2:n.width/2)},centercenter:function(t,n,o){return this.getPos("centerleft",t,n,o)+o.width/2},centerright:function(t,n,o){return-this.getPos("rightright",t,n,o)-(this.isWindow?l/2:n.width/2)},rightleft:function(t,n,o){return this.isWindow?o.left-l:o.left-n.right},rightcenter:function(t,n,o){return this.getPos("rightright",t,n,o)-o.width/2},rightright:function(t,n,o){return this.isWindow?o.right-l:t?this.el.scrollWidth-this.el.scrollLeft-this.el.offsetWidth:o.right-n.right}};r("rolling/engine",{on:function(t,n){var o=t.getAttribute("data-rollon");return null===o?new P(t,"rollon",n):(d[o].add(n),d[o])},to:function(t,n){var o=t.getAttribute("data-rollto");return o&&d[o].stop(),new P(t,"rollto",n)},directions:function(t,n){var o=t.getAttribute("data-rolldirections");return null===o?new P(t,"rolldirections",n):(d[o].add(n),d[o])}})}(t,n),function(t,n,o){var i=e("rolling/engine").to,l=!!navigator.userAgent.match(/webkit/i),u=function(o,e,r){o!==t&&o!==n.body&&o!==n.documentElement||(o=l?n.body:n.documentElement);var u={},c=e.to,a=e.direction||"vertical";if("string"==typeof c&&(c=o.querySelector(c),!c))return!1;if(c instanceof Element){var s=c.getBoundingClientRect();c={top:s.top,left:s.left}}else c.top-=o.scrollTop,c.left-=o.scrollLeft;if("vertical"===a||"both"===a){var h=c.top+(e.shiftTop||0);0!==h&&(u.scrollTop=h)}if("horizontal"===a||"both"===a){var f=c.left+(e.shiftLeft||0);0!==f&&(u.scrollLeft=f)}return Object.keys(u).length?i(o,{a:u,duration:e.duration||1e3,ease:e.ease||"linear",cb:r}):void 0};r("rolling/to",u)}(t,n),function(t,n,o){var i=e("rolling/engine").on,l=/^([a-z]+)(?:\(([-0-9]+|([a-z]+)(?:\(([-0-9]+|)\))?)\))?/,u=!!navigator.userAgent.match(/webkit/i),c=function(o,e,r){o!==t&&o!==n.body&&o!==n.documentElement||(o=u?n.body:n.documentElement);var c,a=e.condition.split(" "),s={cb:r,c:[]};"string"==typeof e.on?s.selector=e.on:e.on instanceof HTMLElement?s.on=[e.on]:e.on||(s.on=[o]);for(var h in a){var f=a[h].match(l),d={};if(!f)throw new Error("Can't parse conditions");0!=h&&"or"!==f[1]||(c=[],s.c.push(c)),"and"!==f[1]&&"or"!==f[1]&&(f[3]||(f[3]=f[1],f[4]=f[2]),d[f[1]]=[f[3],~~f[4]],c.push(d))}return i(o,s,r)};r("rolling/on",c)}(t,n),function(t,n,o){var i=e("rolling/engine").directions,l=!!navigator.userAgent.match(/webkit/i),u=function(o,e,r){return o!==t&&o!==n.body&&o!==n.documentElement||(o=l?n.body:n.documentElement),"function"==typeof e&&(r=e,e={}),i(o,{d:e.direction?e.direction[0]:"v",t:e.threshold||0,cb:r})};r("rolling/directions",u)}(t,n),function(t,n,o){r("rollTo",e("rolling/to"),!0),r("rollOn",e("rolling/on"),!0),r("rollDirections",e("rolling/directions"),!0)}(t,n)}(window,document);